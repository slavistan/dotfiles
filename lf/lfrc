%{{
if [ -z "$LF_TEMPDIR" ] || [ -z "$LF_FIFO_UEBERZUG" ]; then
	lf -remote "send $id echoerr 'LF_TEMPDIR' or 'LF_FIFO_UEBERZUG' not defined. Did you run lf instead of lfrun?"
fi
}}

# View hidden files by default
set hidden

set ratios 1:3

# Draw a nice box around the displayed colums
set nodrawbox

set scrolloff 3

# Draw icons depending on file type
set icons

# Indicator for truncated file names
set truncatechar 'â‹¯'

set timefmt '_2.Dec 2006 15:04'

# Configure prompt to resemble my zsh-prompt
set promptfmt "\033[1;38;5;138m[ lf ] \033[1;38;5;159m%u@%h \033[38;5;15min \033[38;5;154m%w\033[0m"

# CTRL-h: toggle hidden files
map <backspace> set hidden!

cmd openswallow %{{
	lf-open.sh "$f"
}}

map o openswallow

cmd quitcd ${{
	echo "1" > "$LF_TEMPDIR"/cdtolastdir
	lf -remote "send $id quit"
}}

map x quitcd

# Thumbnail selection setup

cmd thumbnailselect_accept %{{
	basename "$f" >"$LF_THUMBNAILSELECT"
	lf -remote "send $id quit"
}}

%{{
if [ ! -z "$LF_THUMBNAILSELECT" ]; then
	lf -remote "send reload"
	lf -remote "send $id set nohidden"
	lf -remote "send $id set ratios 1:3"
	lf -remote "send $id set promptfmt \"\033[1m%f\033[0m\""
	lf -remote "send $id map <enter> thumbnailselect_accept"
	lf -remote "send $id set previewer lf-thumbnailselect-preview.sh"
	lf -remote "send $id echo \"\""
else
	lf -remote "send set previewer /home/stan/.config/lf/lf-preview.sh"
	lf -remote "send set cleaner /home/stan/.config/lf/lf-cleanpreview.sh"
fi
}}
